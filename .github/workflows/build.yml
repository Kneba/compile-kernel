#
# Copyright (C) 2023 RyuujiX <saputradenny712@gmail.com>
# Copyright (C) 2023-2024 Kneba <abenkenary3@gmail.com>
#

name: Compile kernel

env:
   TOKEN: ${{ secrets.TOKEN }}
   USERNAME: ${{ secrets.USERNAME }}
   TG_CHAT_ID: ${{ secrets.TG_CHAT_ID }}
   TG_TOKEN: ${{ secrets.TG_TOKEN }}

on: [push]

jobs:
  kernel-build:
    runs-on: ubuntu-latest
    container:
      image: panchajanya1999/archlinux:latest
    steps:
    - uses: actions/checkout@v4
    - name: Setup CI
      run: |
        sudo ln -s /usr/share/zoneinfo/Asia/Jakarta /etc/localtime && date
        sudo pacman -Sy --noconfirm git bc llvm lld inetutils python3 flex bison libc++ libxml2 python-pipx zip wget cpio jdk-openjdk tzdata
    - name: Setup and Build Kernel
            git clone --depth=1 --recursive https://$USERNAME:$TOKEN@github.com/Kneba/kernel_asus_sdm660 -b tom kernel && cd kernel
      run: bash build.sh
